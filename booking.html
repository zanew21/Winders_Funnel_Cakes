<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Winder's Funnel Cakes - Book Us</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <header>
        <div class="logo"><a href="index.html">Winder's Funnel Cakes</a></div>
        <button class="menu-toggle" aria-label="Toggle navigation">&#9776;</button>
        <nav>
            <ul class="nav-links">
                <li><a href="index.html">Home</a></li>
                <li><a href="flavors.html">Flavors</a></li>
                <li><a href="booking.html">Book Our Truck</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <section class="animate-on-scroll">
            <h1>Request Winder's Funnel Cakes for Your Event</h1>
            <p style="text-align: center; margin-bottom: 30px;">We'd love to bring the sweetness to your wedding, corporate event, festival, or private party!</p>
            
             <form action="https://formspree.io/f/movyalvy" method="POST">

                
                <div class="form-group">
                    <label for="event-type">Type of Event <span style="color: red;">*</span></label>
                    <select id="event-type" name="event-type" required>
                        <option value="">-- Select Event Type --</option>
                        <option value="Wedding">Wedding</option>
                        <option value="Corporate">Corporate Event</option>
                        <option value="Birthday">Birthday Party</option>
                        <option value="Festival">Public Festival/Fair</option>
                        <option value="Other">Other (Specify in Details)</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="name">Your Full Name <span style="color: red;">*</span></label>
                    <input type="text" id="name" name="name" required>
                </div>
                
                <div class="form-group">
                    <label for="email">Email Address <span style="color: red;">*</span></label>
                    <input type="email" id="email" name="email" required>
                </div>
                
                <div class="form-group">
                    <label for="phone">Phone Number</label>
                    <input type="tel" id="phone" name="phone">
                </div>
                
                <div class="form-group">
                    <label for="date">Desired Event Date <span style="color: red;">*</span></label>
                    <input type="date" id="date" name="date" required>
                </div>
                
                <div class="form-group">
                    <label for="guests">Estimated Number of Guests</label>
                    <input type="number" id="guests" name="guests" min="50" placeholder="e.g., 150">
                </div>
                
                <div class="form-group">
                    <label for="location">Event Location/Address <span style="color: red;">*</span></label>
                    <input type="text" id="location" name="location" required>
                </div>
                
                <div class="form-group">
                    <label for="details">Additional Details or Requests</label>
                    <textarea id="details" name="details" rows="5" placeholder="Tell us about your event, specific flavors you'd like, or any special timing requirements."></textarea>
                </div>
                
                <input type="text" name="_gotcha" style="display:none" tabindex="-1">
                
                <button type="submit">Submit Booking Request</button>
            </form>
            
            <p style="text-align: center; margin-top: 20px; font-style: italic;">We will review your request and get back to you within 48 hours!</p>
        </section>
    </main>

    <footer>
        &copy; 2025 Winder's Funnel Cakes | Made with Love and Powdered Sugar
    </footer>

    <script>
        // üçî Mobile Menu Toggle
        const menuToggle = document.querySelector('.menu-toggle');
        const navLinks = document.querySelector('.nav-links');

        menuToggle.addEventListener('click', () => {
            navLinks.classList.toggle('active');
        });

        // ü™Ñ Scroll Animation Logic (Intersection Observer)
        const observerOptions = {
            root: null,
            rootMargin: '0px',
            threshold: 0.2 // When 20% of the element is visible
        };

        const observer = new IntersectionObserver((entries, observer) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    // If element is now visible, add the 'visible' class
                    entry.target.classList.add('visible');
                    // Stop observing it once it has appeared
                    observer.unobserve(entry.target);
                }
            });
        }, observerOptions);

        // Select all elements marked for animation
        const elementsToAnimate = document.querySelectorAll('.animate-on-scroll');
        
        // Start observing each element
        elementsToAnimate.forEach(element => {
            observer.observe(element);
        });

        // üìß Form Submission Handler (For Formspree)
        const bookingForm = document.querySelector('form');
        
        // Ensure the form element exists and has an action attribute set for Formspree
        if (bookingForm && bookingForm.action.includes('formspree')) {
            bookingForm.addEventListener('submit', async function(event) {
                // Prevent default submission to handle it via JS
                event.preventDefault(); 
                const form = event.target;
                const statusMessage = document.createElement('p');
                statusMessage.style.textAlign = 'center';
                statusMessage.style.marginTop = '20px';
                statusMessage.style.fontWeight = 'bold';

                try {
                    // Send the data using fetch
                    const response = await fetch(form.action, {
                        method: form.method,
                        body: new FormData(form),
                        headers: { 'Accept': 'application/json' }
                    });

                    // Remove any old status message
                    const existingStatus = form.parentNode.querySelector('.form-status');
                    if (existingStatus) existingStatus.remove();

                    if (response.ok) {
                        statusMessage.textContent = '‚úÖ Success! Your booking request has been sent. We will be in touch shortly!';
                        statusMessage.style.color = 'green';
                        form.reset(); // Clear the form fields on success
                    } else {
                        statusMessage.textContent = '‚ùå Oops! There was an error submitting your form. Please try again.';
                        statusMessage.style.color = 'red';
                    }
                } catch (error) {
                    statusMessage.textContent = '‚ùå Network Error. Please check your connection and try again.';
                    statusMessage.style.color = 'red';
                }
                
                statusMessage.classList.add('form-status');
                form.parentNode.appendChild(statusMessage);
            });
        }
    </script>

</body>
</html>
